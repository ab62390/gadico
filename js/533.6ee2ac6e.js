"use strict";(self["webpackChunkGadico"]=self["webpackChunkGadico"]||[]).push([[533],{8533:(e,l,o)=>{o.r(l),o.d(l,{default:()=>se});var a=o(3673);const n={class:"col q-px-lg"};function i(e,l,o,i,d,t){const s=(0,a.up)("q-btn"),u=(0,a.up)("q-icon"),r=(0,a.up)("q-input"),c=(0,a.up)("q-toolbar"),p=(0,a.up)("q-separator"),m=(0,a.up)("PeopleList"),g=(0,a.up)("PersonDialog"),k=(0,a.up)("LinkDialog"),v=(0,a.up)("Unlink"),w=(0,a.up)("AddChildDialog"),f=(0,a.up)("RemoveDialog"),q=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{size:"md",flat:"",dense:"",icon:"dehaze",color:"primary",onClick:e.toggleLeftDrawer},null,8,["onClick"]),(0,a._)("div",n,[(0,a.Wm)(r,{dir:"rtl",class:"full-width",modelValue:e.keyword,"onUpdate:modelValue":l[1]||(l[1]=l=>e.keyword=l),outlined:"",dense:""},{prepend:(0,a.w5)((()=>[""==e.keyword?((0,a.wg)(),(0,a.j4)(u,{key:0,name:"search"})):((0,a.wg)(),(0,a.j4)(u,{key:1,onClick:l[0]||(l[0]=l=>e.keyword=""),name:"close",class:"cursor-pointer"}))])),_:1},8,["modelValue"])]),(0,a.Wm)(s,{size:"md",flat:"",dense:"",icon:"bookmark_border",color:"primary",onClick:e.toggleRightDrawer},null,8,["onClick"])])),_:1}),(0,a.Wm)(p),(0,a.Wm)(m,{people:e.people},null,8,["people"]),e.store.personId>0?((0,a.wg)(),(0,a.j4)(g,{key:0})):(0,a.kq)("",!0),void 0!=e.store._link?((0,a.wg)(),(0,a.j4)(k,{key:1})):(0,a.kq)("",!0),void 0!=e.store._unlink?((0,a.wg)(),(0,a.j4)(v,{key:2})):(0,a.kq)("",!0),void 0!=e.store._addChild?((0,a.wg)(),(0,a.j4)(w,{key:3})):(0,a.kq)("",!0),void 0!=e.store._remove?((0,a.wg)(),(0,a.j4)(f,{key:4})):(0,a.kq)("",!0)])),_:1})}var d=o(1959),t=o(2323);const s=["onClick"],u={key:0},r=["onClick"],c={key:0},p={class:"q-pr-sm text-grey-8"},m=["onClick"];function g(e,l,o,n,i,d){const g=(0,a.up)("q-icon"),k=(0,a.up)("q-card"),v=(0,a.up)("q-item-section"),w=(0,a.up)("q-item"),f=(0,a.up)("q-virtual-scroll");return(0,a.wg)(),(0,a.j4)(f,{dir:"rtl",class:"q-pt-sm q-pb-xl q-px-xs",style:{height:"90vh"},items:e.people},{default:(0,a.w5)((({item:l,index:o})=>[((0,a.wg)(),(0,a.j4)(w,{key:o,class:"q-px-none q-py-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("span",{class:(0,t.C_)(l.id>0?"cursor-pointer":""),onClick:o=>e.showPerson(l.id)},(0,t.zw)(l.n.replace(/,/g," ")),11,s),e.isEdit&&l.id>0?((0,a.wg)(),(0,a.iD)("span",u,[(0,a.Wm)(g,{name:"add_link",size:"xs",class:"q-mr-md",onClick:o=>e.openLinkDialog(l.id,0)},null,8,["onClick"]),e.isChild(l.id)?((0,a.wg)(),(0,a.j4)(g,{key:0,name:"close",size:"xs",class:"q-mr-md",onClick:o=>e.remove(l.id)},null,8,["onClick"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.wifes(l.w),(o=>((0,a.wg)(),(0,a.iD)("div",{key:o.id,class:"q-pt-sm q-pr-sm"},[(0,a._)("div",null,[(0,a._)("span",{class:"text-grey-9 cursor-pointer",onClick:l=>e.showPerson(o.id)},"» "+(0,t.zw)(o.n.replace(/,/g," ")),9,r),e.isEdit?((0,a.wg)(),(0,a.iD)("span",c,[(0,a.Wm)(g,{name:"add_link",size:"xs",class:"q-mr-md",onClick:l=>e.openLinkDialog(0,o.id)},null,8,["onClick"]),(0,a.Wm)(g,{name:"add",size:"xs",class:"q-mr-md",onClick:a=>e.openAddChildDialog(l.id,o.id)},null,8,["onClick"]),e.isChild(o.id)?((0,a.wg)(),(0,a.j4)(g,{key:0,name:"close",size:"xs",class:"q-mr-md",onClick:l=>e.remove(o.id)},null,8,["onClick"])):e.hisChildMother(l.id,o.c)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(g,{key:1,name:"link_off",size:"xs",class:"q-mr-md",onClick:a=>e.unlink(l.id,o.id)},null,8,["onClick"]))])):(0,a.kq)("",!0)]),(0,a._)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.children(l.id,o.c),(l=>((0,a.wg)(),(0,a.iD)("span",{key:l.id,class:"q-pl-xs cursor-pointer",onClick:o=>e.showPerson(l.id)},(0,t.zw)(l.n.split(",")[0]+" "),9,m)))),128))])])))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:1},8,["items"])}var k=o(9443);const v=(0,a.aZ)({name:"PeopleList",props:{people:{type:Array,required:!0},_isEdit:{type:Boolean,required:!1,default:!1}},setup(e){const l=(0,k.Z)(),o=e=>{const o=Object.values(e);return Object.values(l.people).filter((e=>o.includes(e.id)))},n=(e,o)=>{if(!o)return[];const a=Object.keys(o);return Object.values(l.people).filter((l=>a.includes(l.id.toString())&&l.f==e))},i=e=>{e>0&&(l.personId=e)},d=(0,a.Fl)((()=>e._isEdit&&l._isEdit)),t=e=>0!=e&&(l.people[e].w?0==Object.keys(l.people[e].w).length:0==Object.keys(l.people[e].h).length),s=(e,l)=>!!l&&Object.values(l).filter((l=>l.f==e)).length>0,u=(e,o)=>{l._link={f:e,m:o}},r=(e,o)=>{l._unlink={f:e,m:o}},c=(e,o)=>{l._addChild={f:e,m:o}},p=e=>{l._remove={c:e}};return{store:l,isEdit:d,wifes:o,children:n,showPerson:i,isChild:t,hisChildMother:s,openLinkDialog:u,unlink:r,openAddChildDialog:c,remove:p}}});var w=o(4260),f=o(1362),q=o(3414),_=o(2035),h=o(151),Z=o(4554),C=o(7518),W=o.n(C);const y=(0,w.Z)(v,[["render",g]]),b=y;function Q(e,l,o,n,i,d){const t=(0,a.up)("q-icon"),s=(0,a.up)("q-space"),u=(0,a.up)("q-bar"),r=(0,a.up)("PeopleList"),c=(0,a.up)("q-card"),p=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(p,{modelValue:e.dialog,"onUpdate:modelValue":l[2]||(l[2]=l=>e.dialog=l),persistent:"",maximized:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"bg-grey-1 q-py-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{name:"close",size:"md",class:"cursor-pointer",onClick:l[0]||(l[0]=l=>e.closeMe())}),(0,a.Wm)(s),(0,a.Wm)(t,{name:"edit",size:"sm",class:"cursor-pointer",color:e.isEdit?"primary":"",onClick:l[1]||(l[1]=l=>e.toggleEditMode())},null,8,["color"])])),_:1}),(0,a.Wm)(r,{people:e.people,_isEdit:!0},null,8,["people"])])),_:1})])),_:1},8,["modelValue"])}W()(v,"components",{QVirtualScroll:f.Z,QItem:q.Z,QItemSection:_.Z,QCard:h.Z,QIcon:Z.Z});const V=(0,a.aZ)({name:"PersonDialog",components:{PeopleList:b},setup(){const e=(0,k.Z)(),l=(0,a.Fl)((()=>e.personId>0)),o=()=>e.personId=0,n=(0,a.Fl)((()=>{const l=e.people[e.personId],o=[],a=l.f;a>0&&o.push(a);const n=[];l.w?o.push(l.id):Object.keys(l.h).length>0?o.push(...Object.values(l.h)):n.push({id:0,f:0,m:0,n:"- - -",w:JSON.parse(`{"${l.id}":${l.id}}`)});const i=Object.values(e.people).filter((e=>o.includes(e.id)));return[...i.filter((e=>e.id==a)),...n,...i.filter((e=>e.id!=a))]})),i=()=>{e._isEdit=!e._isEdit},d=(0,a.Fl)((()=>e._isEdit));return(0,a.Jd)((()=>{e._isEdit=!1})),{dialog:l,people:n,toggleEditMode:i,isEdit:d,closeMe:o}}});var j=o(8927),D=o(846),x=o(2025);const U=(0,w.Z)(V,[["render",Q]]),z=U;function I(e,l,o,n,i,d){const s=(0,a.up)("q-btn"),u=(0,a.up)("q-space"),r=(0,a.up)("q-icon"),c=(0,a.up)("q-bar"),p=(0,a.up)("q-radio"),m=(0,a.up)("q-item-section"),g=(0,a.up)("q-input"),k=(0,a.up)("q-item"),v=(0,a.up)("q-virtual-scroll"),w=(0,a.up)("q-card"),f=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(f,{modelValue:e.dialog,"onUpdate:modelValue":l[7]||(l[7]=l=>e.dialog=l),dir:"rtl",persistent:"",maximized:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"bg-grey-1 q-py-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{label:"حفظ",disable:!e.canSave,color:"primary",size:"md",flat:"",onClick:l[0]||(l[0]=l=>e.save())},null,8,["disable"]),(0,a.Wm)(u),(0,a.Wm)(r,{name:"close",size:"md",class:"cursor-pointer",onClick:l[1]||(l[1]=l=>e.closeMe())})])),_:1}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{side:""},{default:(0,a.w5)((()=>[e.uf?((0,a.wg)(),(0,a.j4)(p,{key:0,modelValue:e.m,"onUpdate:modelValue":l[2]||(l[2]=l=>e.m=l),val:0,class:"q-pl-sm",dense:""},null,8,["modelValue"])):((0,a.wg)(),(0,a.j4)(p,{key:1,modelValue:e.f,"onUpdate:modelValue":l[3]||(l[3]=l=>e.f=l),val:0,class:"q-pl-sm",dense:""},null,8,["modelValue"]))])),_:1}),(0,a.Wm)(m,{class:"text-right"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{modelValue:e.keyword,"onUpdate:modelValue":l[4]||(l[4]=l=>e.keyword=l),disable:e.disableInput,outlined:"",dense:""},null,8,["modelValue","disable"])])),_:1})])),_:1}),(0,a.Wm)(v,{class:"q-pb-xl",style:{"max-height":"90vh"},items:e.data},{default:(0,a.w5)((({item:o,index:n})=>[((0,a.wg)(),(0,a.j4)(k,{key:n,dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{side:""},{default:(0,a.w5)((()=>[e.uf?((0,a.wg)(),(0,a.j4)(p,{key:0,modelValue:e.m,"onUpdate:modelValue":l[5]||(l[5]=l=>e.m=l),val:o.id,class:"q-pl-sm",dense:""},null,8,["modelValue","val"])):((0,a.wg)(),(0,a.j4)(p,{key:1,modelValue:e.f,"onUpdate:modelValue":l[6]||(l[6]=l=>e.f=l),val:o.id,class:"q-pl-sm",dense:""},null,8,["modelValue","val"]))])),_:2},1024),(0,a.Wm)(m,{class:"text-right"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(o.n.replace(/,/g," ")),1)])),_:2},1024)])),_:2},1024))])),_:1},8,["items"])])),_:1})])),_:1},8,["modelValue"])}W()(V,"components",{QDialog:j.Z,QCard:h.Z,QBar:D.Z,QIcon:Z.Z,QSpace:x.Z});const E=(0,a.aZ)({name:"LinkDialog",setup(){const e=(0,k.Z)(),l=(0,a.Fl)((()=>void 0!=e._link)),o=()=>e._link=void 0,{f:n,m:i}=(0,d.BK)(e._link),t=(0,a.Fl)((()=>!(!n.value||!i.value))),s=(0,a.Fl)((()=>{const e=r.value;return n.value&&i.value||e.length>1&&(n.value||i.value)})),u=()=>{n.value&&i.value?e.link(n.value,i.value):r.value.length>1&&(n.value||i.value)?(n.value&&e.linkFather(n.value,r.value),i.value&&e.linkMother(i.value,r.value)):console.log("save link error")},r=(0,d.iH)(""),c=[],p=(0,a.Fl)((()=>""==r.value?[]:c.filter((e=>e.n.startsWith(r.value)))));return(0,a.wF)((()=>{n.value?Object.values(e.people).forEach((e=>{e.h&&c.push({id:e.id,n:e.n})})):i.value?Object.values(e.people).forEach((e=>{e.w&&c.push({id:e.id,n:e.n})})):console.log("Wrong Link Parents")})),{dialog:l,closeMe:o,f:n,m:i,uf:(0,d.SU)(n),keyword:r,disableInput:t,data:p,canSave:s,save:u}}});var S=o(6114),L=o(9337),P=o(1207);const F=(0,w.Z)(E,[["render",I]]),M=F;W()(E,"components",{QDialog:j.Z,QCard:h.Z,QBar:D.Z,QBtn:S.Z,QSpace:x.Z,QIcon:Z.Z,QItem:q.Z,QItemSection:_.Z,QRadio:L.Z,QInput:P.Z,QVirtualScroll:f.Z});const O=(0,a.Uk)(" فك اﻹرتباط ؟ ");function B(e,l,o,n,i,d){const t=(0,a.up)("q-card-actions"),s=(0,a.up)("q-btn"),u=(0,a.up)("q-space"),r=(0,a.up)("q-card"),c=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(c,{modelValue:e.dialog,"onUpdate:modelValue":l[2]||(l[2]=l=>e.dialog=l),dir:"rtl",persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"q-pt-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[O])),_:1}),(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{label:"إلغاء",flat:"",onClick:l[0]||(l[0]=l=>e.closeMe())}),(0,a.Wm)(u),(0,a.Wm)(s,{label:"تأكيد",dense:"",onClick:l[1]||(l[1]=l=>e.unlink())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}const A=(0,a.aZ)({name:"UnlinkDialog",setup(){const e=(0,k.Z)(),l=(0,a.Fl)((()=>void 0!=e._unlink)),o=()=>e._unlink=void 0,n=()=>{const{f:l,m:o}=e._unlink;e.unlink(l,o)};return{dialog:l,closeMe:o,unlink:n}}});var R=o(9367);const H=(0,w.Z)(A,[["render",B]]),K=H;function G(e,l,o,n,i,d){const t=(0,a.up)("q-input"),s=(0,a.up)("q-card-actions"),u=(0,a.up)("q-radio"),r=(0,a.up)("q-card-section"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-space"),m=(0,a.up)("q-card"),g=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(g,{modelValue:e.dialog,"onUpdate:modelValue":l[5]||(l[5]=l=>e.dialog=l),dir:"rtl",persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"q-pt-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Wm)(t,{modelValue:e.n,"onUpdate:modelValue":l[0]||(l[0]=l=>e.n=l),outlined:"",dense:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:e.g,"onUpdate:modelValue":l[1]||(l[1]=l=>e.g=l),val:"m",label:"إبن"},null,8,["modelValue"]),(0,a.Wm)(u,{modelValue:e.g,"onUpdate:modelValue":l[2]||(l[2]=l=>e.g=l),val:"f",label:"إبنة"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"إلغاء",flat:"",onClick:l[3]||(l[3]=l=>e.closeMe())}),(0,a.Wm)(p),(0,a.Wm)(c,{label:"حفظ",onClick:l[4]||(l[4]=l=>e.save())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}W()(A,"components",{QDialog:j.Z,QCard:h.Z,QCardActions:R.Z,QBtn:S.Z,QSpace:x.Z});const J=(0,a.aZ)({name:"AddChildDialog",setup(){const e=(0,k.Z)(),l=(0,a.Fl)((()=>void 0!=e._addChild)),o=()=>e._addChild=void 0,{f:n,m:i}=(0,d.BK)(e._addChild),{n:t,g:s}={n:(0,d.iH)(""),g:(0,d.iH)("")},u=()=>{n.value&&i.value&&s.value&&t.value.length>1&&e.addChild(n.value,i.value,s.value,t.value)};return{n:t,g:s,dialog:l,closeMe:o,save:u}}});var Y=o(5589);const $=(0,w.Z)(J,[["render",G]]),N=$;W()(J,"components",{QDialog:j.Z,QCard:h.Z,QCardActions:R.Z,QInput:P.Z,QCardSection:Y.Z,QRadio:L.Z,QBtn:S.Z,QSpace:x.Z});const T=(0,a.Uk)(" حذف ؟ ");function X(e,l,o,n,i,d){const t=(0,a.up)("q-card-section"),s=(0,a.up)("q-btn"),u=(0,a.up)("q-space"),r=(0,a.up)("q-card-actions"),c=(0,a.up)("q-card"),p=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(p,{modelValue:e.dialog,"onUpdate:modelValue":l[2]||(l[2]=l=>e.dialog=l),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(t,{class:"text-center"},{default:(0,a.w5)((()=>[T])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{label:"حذف",onClick:l[0]||(l[0]=l=>e.remove())}),(0,a.Wm)(u),(0,a.Wm)(s,{label:"إلغاء",flat:"",onClick:l[1]||(l[1]=l=>e.closeMe())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}const ee=(0,a.aZ)({name:"RemoveDialog",setup(){const e=(0,k.Z)(),l=(0,a.Fl)((()=>void 0!=e._remove)),o=()=>e._remove=void 0,n=()=>{e.removeChild(e._remove.c)};return{dialog:l,closeMe:o,remove:n}}}),le=(0,w.Z)(ee,[["render",X]]),oe=le;W()(ee,"components",{QDialog:j.Z,QCard:h.Z,QCardSection:Y.Z,QCardActions:R.Z,QBtn:S.Z,QSpace:x.Z});const ae=(0,a.aZ)({name:"PageIndex",components:{PeopleList:b,PersonDialog:z,LinkDialog:M,Unlink:K,AddChildDialog:N,RemoveDialog:oe},setup(){const e=(0,k.Z)(),l=(0,d.iH)(""),o=(0,a.Fl)((()=>Object.values(e.people).filter((e=>e.w&&Object.keys(e.w).length>0&&e.n.startsWith(l.value)))));return(0,a.wF)((()=>e.setPeople())),{store:e,keyword:l,people:o,toggleLeftDrawer(){e._leLeftDrawer=!e._leLeftDrawer},toggleRightDrawer(){e._rightDrawer=!e._rightDrawer}}}});var ne=o(4379),ie=o(9570),de=o(5869);const te=(0,w.Z)(ae,[["render",i]]),se=te;W()(ae,"components",{QPage:ne.Z,QToolbar:ie.Z,QBtn:S.Z,QInput:P.Z,QIcon:Z.Z,QSeparator:de.Z})}}]);